{% extends "base.html" %}

{% block title %}
{% if category %}{{ category.name }}{% else %}–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä—ñ–≤{% endif %}
{% endblock %}

{% block content %}

<h1 class="text-4xl font-bold mb-4">{% if category %}{{ category.name }}{% else %}–ö–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä—ñ–≤{% endif %}</h1>

<div class="sort-buttons flex flex-wrap gap-3 mb-6">
    <a href="?sort=new" class="sort-btn px-4 py-2 bg-teal-100 hover:bg-teal-200 rounded">–ù–æ–≤—ñ</a>
    <a href="?sort=old" class="sort-btn px-4 py-2 bg-teal-100 hover:bg-teal-200 rounded">–°—Ç–∞—Ä—ñ</a>
    <a href="?sort=popular" class="sort-btn px-4 py-2 bg-teal-100 hover:bg-teal-200 rounded">–ü–æ–ø—É–ª—è—Ä–Ω—ñ</a>
    <a href="?sort=price_low" class="sort-btn px-4 py-2 bg-teal-100 hover:bg-teal-200 rounded">–¶—ñ–Ω–∞ ‚Üë</a>
    <a href="?sort=price_high" class="sort-btn px-4 py-2 bg-teal-100 hover:bg-teal-200 rounded">–¶—ñ–Ω–∞ ‚Üì</a>
</div>

<div class="products-grid grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
    {% for product in products %}
        <div class="product-card bg-white rounded-lg shadow-md p-5 hover:shadow-xl relative">
            {% if product.featured %}
                <div class="featured-badge absolute top-2 right-2 bg-yellow-400 text-white px-2 py-1 rounded text-sm font-bold">
                    –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–∏–π
                </div>
            {% endif %}

            {% if product.image %}
                <img src="{{ product.image.url }}" class="w-full h-48 object-cover rounded mb-4" alt="{{ product.name }}">
            {% endif %}

            <h2 class="text-2xl font-bold mb-1">{{ product.name }}</h2>
            <p class="text-teal-600 font-semibold mb-2">{{ product.price }} –≥—Ä–Ω</p>
            <p class="text-gray-600 mb-3">{{ product.description|truncatewords:15 }}</p>
            <div class="flex justify-between text-sm text-gray-500 mb-3">
                <span>üëÅÔ∏è {{ product.views }}</span>
                <span>üìÇ <a href="{{ product.category.get_absolute_url }}" class="hover:text-teal-600">{{ product.category.name }}</a></span>
            </div>
            <a href="{{ product.get_absolute_url }}" class="bg-teal-600 hover:bg-teal-700 text-white px-4 py-2 rounded">–î–µ—Ç–∞–ª—ñ</a>
        </div>
    {% empty %}
        <p>–¢–æ–≤–∞—Ä–∏ –≤—ñ–¥—Å—É—Ç–Ω—ñ</p>
    {% endfor %}
</div>

{% endblock %}
